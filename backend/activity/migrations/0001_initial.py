# Generated by Django 6.0 on 2025-12-27 15:45

import django.core.validators
import django.db.models.deletion
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('core', '0004_remove_activityprescription_extra_data_and_more'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='ActivityLog',
            fields=[
                ('id', models.AutoField(primary_key=True, serialize=False)),
                ('manual_name', models.CharField(blank=True, help_text='Custom exercise name if not using Exercise library', max_length=255, null=True)),
                ('order_in_workout', models.PositiveIntegerField(default=0, help_text='Order this activity was performed in the workout')),
                ('total_sets', models.IntegerField(blank=True, null=True)),
                ('total_reps', models.IntegerField(blank=True, null=True)),
                ('total_volume', models.DecimalField(blank=True, decimal_places=2, help_text='Total volume (weight x reps) in kg', max_digits=12, null=True)),
                ('max_weight', models.DecimalField(blank=True, decimal_places=2, help_text='Heaviest weight used in kg', max_digits=8, null=True)),
                ('total_distance', models.DecimalField(blank=True, decimal_places=2, help_text='Total distance in meters', max_digits=10, null=True)),
                ('total_duration', models.DecimalField(blank=True, decimal_places=2, help_text='Total duration in seconds', max_digits=10, null=True)),
                ('avg_pace', models.DecimalField(blank=True, decimal_places=2, help_text='Average pace in seconds per km', max_digits=8, null=True)),
                ('notes', models.TextField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('activity', models.ForeignKey(blank=True, help_text='Link to planned activity if from program', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='activity_logs', to='core.activity')),
                ('exercise', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='activity_logs', to='core.exercise')),
            ],
            options={
                'verbose_name': 'Activity Log',
                'verbose_name_plural': 'Activity Logs',
                'db_table': 'activity_log',
                'ordering': ['workout_log', 'order_in_workout'],
            },
        ),
        migrations.CreateModel(
            name='SetLog',
            fields=[
                ('id', models.AutoField(primary_key=True, serialize=False)),
                ('set_number', models.PositiveIntegerField(help_text='Sequential set number for this exercise')),
                ('set_type', models.CharField(choices=[('working', 'Working Set'), ('warmup', 'Warmup'), ('dropset', 'Drop Set'), ('failure', 'To Failure'), ('cooldown', 'Cooldown'), ('cluster', 'Cluster Set'), ('rest_pause', 'Rest-Pause')], default='working', max_length=20)),
                ('weight', models.DecimalField(blank=True, decimal_places=2, help_text='Weight in kg', max_digits=8, null=True)),
                ('is_per_side', models.BooleanField(default=False, help_text='If True, weight is per side (unilateral)')),
                ('reps', models.IntegerField(blank=True, help_text='Reps completed', null=True)),
                ('is_to_failure', models.BooleanField(default=False, help_text='Set was taken to failure')),
                ('rpe', models.DecimalField(blank=True, decimal_places=1, help_text='Rate of Perceived Exertion 1-10', max_digits=3, null=True, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(10)])),
                ('rir', models.IntegerField(blank=True, help_text='Reps in Reserve', null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(10)])),
                ('duration_seconds', models.DecimalField(blank=True, decimal_places=2, help_text='Time under tension or set duration', max_digits=8, null=True)),
                ('rest_after_seconds', models.IntegerField(blank=True, help_text='Rest taken after this set', null=True)),
                ('tempo', models.CharField(blank=True, help_text='Tempo notation (e.g., 3-1-2-0)', max_length=20, null=True)),
                ('distance', models.DecimalField(blank=True, decimal_places=2, help_text='Distance in meters', max_digits=10, null=True)),
                ('calories', models.IntegerField(blank=True, help_text='Calories burned', null=True)),
                ('avg_power', models.IntegerField(blank=True, null=True)),
                ('peak_power', models.IntegerField(blank=True, null=True)),
                ('avg_velocity', models.DecimalField(blank=True, decimal_places=3, help_text='Average bar velocity in m/s', max_digits=6, null=True)),
                ('started_at', models.DateTimeField(blank=True, null=True)),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
                ('notes', models.TextField(blank=True, null=True)),
                ('is_completed', models.BooleanField(default=True, help_text='False if set was skipped or partial')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('activity_log', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='set_logs', to='activity.activitylog')),
                ('activity_prescription', models.ForeignKey(blank=True, help_text='Link to planned set if from program', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='set_logs', to='core.activityprescription')),
            ],
            options={
                'verbose_name': 'Set Log',
                'verbose_name_plural': 'Set Logs',
                'db_table': 'set_log',
                'ordering': ['activity_log', 'set_number'],
            },
        ),
        migrations.CreateModel(
            name='WorkoutLog',
            fields=[
                ('id', models.AutoField(primary_key=True, serialize=False)),
                ('title', models.CharField(blank=True, help_text='User-provided or auto-generated title', max_length=255, null=True)),
                ('notes', models.TextField(blank=True, help_text='User notes about the workout', null=True)),
                ('source', models.CharField(choices=[('manual', 'Manual Entry'), ('garmin_fit', 'Garmin FIT File'), ('garmin_connect', 'Garmin Connect API'), ('apple_health', 'Apple Health'), ('strava', 'Strava'), ('wahoo', 'Wahoo'), ('polar', 'Polar'), ('whoop', 'Whoop'), ('other', 'Other')], default='manual', max_length=50)),
                ('external_id', models.CharField(blank=True, help_text='ID from external source (Garmin activity ID, etc.)', max_length=255, null=True)),
                ('sport', models.CharField(choices=[('running', 'Running'), ('cycling', 'Cycling'), ('swimming', 'Swimming'), ('strength', 'Strength Training'), ('crossfit', 'CrossFit'), ('rowing', 'Rowing'), ('walking', 'Walking'), ('hiking', 'Hiking'), ('yoga', 'Yoga'), ('elliptical', 'Elliptical'), ('stair_climbing', 'Stair Climbing'), ('skiing', 'Skiing'), ('other', 'Other')], default='other', max_length=50)),
                ('sub_sport', models.CharField(choices=[('generic', 'Generic'), ('treadmill', 'Treadmill'), ('street', 'Street/Road'), ('trail', 'Trail'), ('track', 'Track'), ('virtual_activity', 'Virtual/Indoor'), ('indoor_cycling', 'Indoor Cycling'), ('mountain', 'Mountain'), ('open_water', 'Open Water'), ('lap_swimming', 'Lap Swimming'), ('freestyle', 'Freestyle')], default='generic', max_length=50)),
                ('started_at', models.DateTimeField(help_text='When the workout started')),
                ('ended_at', models.DateTimeField(blank=True, help_text='When the workout ended', null=True)),
                ('total_elapsed_time', models.DecimalField(blank=True, decimal_places=2, help_text='Total elapsed time including rest (seconds)', max_digits=10, null=True)),
                ('total_timer_time', models.DecimalField(blank=True, decimal_places=2, help_text='Active timer time (seconds)', max_digits=10, null=True)),
                ('total_moving_time', models.DecimalField(blank=True, decimal_places=2, help_text='Time spent moving (seconds)', max_digits=10, null=True)),
                ('total_distance', models.DecimalField(blank=True, decimal_places=2, help_text='Total distance in meters', max_digits=12, null=True)),
                ('total_ascent', models.IntegerField(blank=True, help_text='Total elevation gain in meters', null=True)),
                ('total_descent', models.IntegerField(blank=True, help_text='Total elevation loss in meters', null=True)),
                ('min_altitude', models.DecimalField(blank=True, decimal_places=2, help_text='Minimum altitude in meters', max_digits=8, null=True)),
                ('max_altitude', models.DecimalField(blank=True, decimal_places=2, help_text='Maximum altitude in meters', max_digits=8, null=True)),
                ('total_calories', models.IntegerField(blank=True, help_text='Total calories burned', null=True)),
                ('total_work', models.IntegerField(blank=True, help_text='Total work in kilojoules', null=True)),
                ('avg_heart_rate', models.IntegerField(blank=True, null=True, validators=[django.core.validators.MinValueValidator(30), django.core.validators.MaxValueValidator(250)])),
                ('max_heart_rate', models.IntegerField(blank=True, null=True, validators=[django.core.validators.MinValueValidator(30), django.core.validators.MaxValueValidator(250)])),
                ('min_heart_rate', models.IntegerField(blank=True, null=True, validators=[django.core.validators.MinValueValidator(30), django.core.validators.MaxValueValidator(250)])),
                ('avg_speed', models.DecimalField(blank=True, decimal_places=3, help_text='Average speed in m/s', max_digits=8, null=True)),
                ('max_speed', models.DecimalField(blank=True, decimal_places=3, help_text='Maximum speed in m/s', max_digits=8, null=True)),
                ('avg_power', models.IntegerField(blank=True, help_text='Average power in watts', null=True)),
                ('max_power', models.IntegerField(blank=True, help_text='Maximum power in watts', null=True)),
                ('normalized_power', models.IntegerField(blank=True, help_text='Normalized power (cycling/running power)', null=True)),
                ('avg_cadence', models.IntegerField(blank=True, help_text='Average cadence (rpm or spm)', null=True)),
                ('max_cadence', models.IntegerField(blank=True, help_text='Maximum cadence', null=True)),
                ('training_stress_score', models.DecimalField(blank=True, decimal_places=2, help_text='TSS (Training Stress Score)', max_digits=6, null=True)),
                ('intensity_factor', models.DecimalField(blank=True, decimal_places=3, help_text='IF (Intensity Factor)', max_digits=4, null=True)),
                ('training_effect_aerobic', models.DecimalField(blank=True, decimal_places=1, help_text='Aerobic training effect (0-5)', max_digits=3, null=True)),
                ('training_effect_anaerobic', models.DecimalField(blank=True, decimal_places=1, help_text='Anaerobic training effect (0-5)', max_digits=3, null=True)),
                ('avg_vertical_oscillation', models.DecimalField(blank=True, decimal_places=1, help_text='Average vertical oscillation in mm', max_digits=5, null=True)),
                ('avg_stance_time', models.DecimalField(blank=True, decimal_places=1, help_text='Average ground contact time in ms', max_digits=6, null=True)),
                ('avg_stride_length', models.DecimalField(blank=True, decimal_places=1, help_text='Average stride length in mm', max_digits=6, null=True)),
                ('avg_vertical_ratio', models.DecimalField(blank=True, decimal_places=2, help_text='Average vertical ratio %', max_digits=5, null=True)),
                ('total_strokes', models.IntegerField(blank=True, null=True)),
                ('avg_stroke_distance', models.DecimalField(blank=True, decimal_places=2, help_text='Average distance per stroke in meters', max_digits=6, null=True)),
                ('pool_length', models.DecimalField(blank=True, decimal_places=2, help_text='Pool length in meters', max_digits=5, null=True)),
                ('total_sets_completed', models.IntegerField(blank=True, help_text='Total number of sets completed', null=True)),
                ('total_reps_completed', models.IntegerField(blank=True, help_text='Total number of reps completed', null=True)),
                ('total_volume', models.DecimalField(blank=True, decimal_places=2, help_text='Total volume (weight x reps) in kg', max_digits=12, null=True)),
                ('start_lat', models.DecimalField(blank=True, decimal_places=7, max_digits=10, null=True)),
                ('start_long', models.DecimalField(blank=True, decimal_places=7, max_digits=10, null=True)),
                ('end_lat', models.DecimalField(blank=True, decimal_places=7, max_digits=10, null=True)),
                ('end_long', models.DecimalField(blank=True, decimal_places=7, max_digits=10, null=True)),
                ('perceived_exertion', models.IntegerField(blank=True, help_text="User's RPE rating 1-10", null=True, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(10)])),
                ('mood_before', models.IntegerField(blank=True, help_text='Mood before workout 1-5', null=True, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(5)])),
                ('mood_after', models.IntegerField(blank=True, help_text='Mood after workout 1-5', null=True, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(5)])),
                ('temperature', models.DecimalField(blank=True, decimal_places=2, help_text='Temperature in Celsius', max_digits=5, null=True)),
                ('humidity', models.IntegerField(blank=True, null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)])),
                ('weather_condition', models.CharField(blank=True, help_text='e.g., Sunny, Rainy, Cloudy', max_length=50, null=True)),
                ('cover_image', models.ImageField(blank=True, null=True, upload_to='img/workout_logs/')),
                ('is_public', models.BooleanField(default=False, help_text='Whether this workout is visible to others')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('session', models.ForeignKey(blank=True, help_text='Link to planned session if following a program', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='workout_logs', to='core.session')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='workout_logs', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Workout Log',
                'verbose_name_plural': 'Workout Logs',
                'db_table': 'workout_log',
                'ordering': ['-started_at'],
            },
        ),
        migrations.CreateModel(
            name='RecordDataPoint',
            fields=[
                ('id', models.AutoField(primary_key=True, serialize=False)),
                ('timestamp', models.DateTimeField(help_text='Exact timestamp of this data point')),
                ('elapsed_seconds', models.DecimalField(decimal_places=2, help_text='Seconds since workout start', max_digits=10)),
                ('latitude', models.DecimalField(blank=True, decimal_places=7, max_digits=10, null=True)),
                ('longitude', models.DecimalField(blank=True, decimal_places=7, max_digits=10, null=True)),
                ('altitude', models.DecimalField(blank=True, decimal_places=2, help_text='Altitude in meters', max_digits=8, null=True)),
                ('distance', models.DecimalField(blank=True, decimal_places=2, help_text='Cumulative distance in meters', max_digits=12, null=True)),
                ('speed', models.DecimalField(blank=True, decimal_places=3, help_text='Instantaneous speed in m/s', max_digits=8, null=True)),
                ('heart_rate', models.IntegerField(blank=True, null=True)),
                ('power', models.IntegerField(blank=True, help_text='Instantaneous power in watts', null=True)),
                ('accumulated_power', models.IntegerField(blank=True, help_text='Cumulative power in watts', null=True)),
                ('cadence', models.IntegerField(blank=True, help_text='Cadence in rpm or spm', null=True)),
                ('vertical_oscillation', models.DecimalField(blank=True, decimal_places=1, help_text='Vertical oscillation in mm', max_digits=5, null=True)),
                ('stance_time', models.DecimalField(blank=True, decimal_places=1, help_text='Ground contact time in ms', max_digits=6, null=True)),
                ('stride_length', models.DecimalField(blank=True, decimal_places=1, help_text='Step length in mm', max_digits=6, null=True)),
                ('vertical_ratio', models.DecimalField(blank=True, decimal_places=2, help_text='Vertical ratio %', max_digits=5, null=True)),
                ('temperature', models.DecimalField(blank=True, decimal_places=2, help_text='Temperature in Celsius', max_digits=5, null=True)),
                ('activity_type', models.CharField(blank=True, max_length=50, null=True)),
                ('workout_log', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='records', to='activity.workoutlog')),
            ],
            options={
                'verbose_name': 'Record Data Point',
                'verbose_name_plural': 'Record Data Points',
                'db_table': 'record_data_point',
                'ordering': ['workout_log', 'elapsed_seconds'],
            },
        ),
        migrations.CreateModel(
            name='PersonalRecord',
            fields=[
                ('id', models.AutoField(primary_key=True, serialize=False)),
                ('manual_name', models.CharField(blank=True, help_text='For non-exercise records (5K, Fran, etc.)', max_length=255, null=True)),
                ('sport', models.CharField(blank=True, choices=[('running', 'Running'), ('cycling', 'Cycling'), ('swimming', 'Swimming'), ('strength', 'Strength Training'), ('crossfit', 'CrossFit'), ('rowing', 'Rowing'), ('walking', 'Walking'), ('hiking', 'Hiking'), ('yoga', 'Yoga'), ('elliptical', 'Elliptical'), ('stair_climbing', 'Stair Climbing'), ('skiing', 'Skiing'), ('other', 'Other')], max_length=50, null=True)),
                ('record_type', models.CharField(choices=[('1rm', '1 Rep Max'), ('max_weight', 'Max Weight (any reps)'), ('max_reps', 'Max Reps (any weight)'), ('max_volume', 'Max Volume'), ('fastest_time', 'Fastest Time'), ('longest_distance', 'Longest Distance'), ('max_power', 'Max Power'), ('best_pace', 'Best Pace')], max_length=20)),
                ('weight_kg', models.DecimalField(blank=True, decimal_places=2, max_digits=8, null=True)),
                ('reps', models.IntegerField(blank=True, null=True)),
                ('time_seconds', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('distance_meters', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('power_watts', models.IntegerField(blank=True, null=True)),
                ('volume_kg', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('achieved_at', models.DateTimeField()),
                ('is_current', models.BooleanField(default=True, help_text='True if this is the current best')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('exercise', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='personal_records', to='core.exercise')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='personal_records', to=settings.AUTH_USER_MODEL)),
                ('set_log', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='personal_records', to='activity.setlog')),
                ('workout_log', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='personal_records', to='activity.workoutlog')),
            ],
            options={
                'verbose_name': 'Personal Record',
                'verbose_name_plural': 'Personal Records',
                'db_table': 'personal_record',
                'ordering': ['-achieved_at'],
            },
        ),
        migrations.CreateModel(
            name='LapLog',
            fields=[
                ('id', models.AutoField(primary_key=True, serialize=False)),
                ('lap_number', models.PositiveIntegerField(help_text='Sequential lap number (1-indexed)')),
                ('lap_trigger', models.CharField(choices=[('manual', 'Manual/Button Press'), ('time', 'Time-based'), ('distance', 'Distance-based'), ('position_start', 'Position/GPS Start'), ('fitness_equipment', 'Fitness Equipment'), ('session_end', 'Session End')], default='manual', max_length=50)),
                ('intensity', models.CharField(choices=[('rest', 'Rest'), ('warmup', 'Warmup'), ('active', 'Active'), ('recovery', 'Recovery'), ('tempo', 'Tempo'), ('threshold', 'Threshold'), ('vo2max', 'VO2 Max'), ('anaerobic', 'Anaerobic'), ('sprint', 'Sprint'), ('cooldown', 'Cooldown')], default='active', max_length=50)),
                ('start_time', models.DateTimeField()),
                ('end_time', models.DateTimeField(blank=True, null=True)),
                ('total_elapsed_time', models.DecimalField(blank=True, decimal_places=2, help_text='Elapsed time in seconds', max_digits=10, null=True)),
                ('total_timer_time', models.DecimalField(blank=True, decimal_places=2, help_text='Timer time in seconds', max_digits=10, null=True)),
                ('total_distance', models.DecimalField(blank=True, decimal_places=2, help_text='Distance in meters', max_digits=10, null=True)),
                ('total_ascent', models.IntegerField(blank=True, null=True)),
                ('total_descent', models.IntegerField(blank=True, null=True)),
                ('min_altitude', models.DecimalField(blank=True, decimal_places=2, max_digits=8, null=True)),
                ('max_altitude', models.DecimalField(blank=True, decimal_places=2, max_digits=8, null=True)),
                ('total_calories', models.IntegerField(blank=True, null=True)),
                ('total_work', models.IntegerField(blank=True, help_text='Work in joules', null=True)),
                ('avg_heart_rate', models.IntegerField(blank=True, null=True)),
                ('max_heart_rate', models.IntegerField(blank=True, null=True)),
                ('avg_speed', models.DecimalField(blank=True, decimal_places=3, max_digits=8, null=True)),
                ('max_speed', models.DecimalField(blank=True, decimal_places=3, max_digits=8, null=True)),
                ('avg_power', models.IntegerField(blank=True, null=True)),
                ('max_power', models.IntegerField(blank=True, null=True)),
                ('normalized_power', models.IntegerField(blank=True, null=True)),
                ('avg_cadence', models.IntegerField(blank=True, null=True)),
                ('max_cadence', models.IntegerField(blank=True, null=True)),
                ('avg_vertical_oscillation', models.DecimalField(blank=True, decimal_places=1, max_digits=5, null=True)),
                ('avg_stance_time', models.DecimalField(blank=True, decimal_places=1, max_digits=6, null=True)),
                ('avg_stride_length', models.DecimalField(blank=True, decimal_places=1, max_digits=6, null=True)),
                ('avg_vertical_ratio', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('start_lat', models.DecimalField(blank=True, decimal_places=7, max_digits=10, null=True)),
                ('start_long', models.DecimalField(blank=True, decimal_places=7, max_digits=10, null=True)),
                ('end_lat', models.DecimalField(blank=True, decimal_places=7, max_digits=10, null=True)),
                ('end_long', models.DecimalField(blank=True, decimal_places=7, max_digits=10, null=True)),
                ('notes', models.TextField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('activity_prescription', models.ForeignKey(blank=True, help_text='Link to planned interval/set if from program', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='lap_logs', to='core.activityprescription')),
                ('workout_log', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='laps', to='activity.workoutlog')),
            ],
            options={
                'verbose_name': 'Lap Log',
                'verbose_name_plural': 'Lap Logs',
                'db_table': 'lap_log',
                'ordering': ['workout_log', 'lap_number'],
            },
        ),
        migrations.CreateModel(
            name='FitFileImport',
            fields=[
                ('id', models.AutoField(primary_key=True, serialize=False)),
                ('original_filename', models.CharField(max_length=255)),
                ('file_size', models.IntegerField(help_text='File size in bytes')),
                ('file_hash', models.CharField(help_text='SHA-256 hash for duplicate detection', max_length=64)),
                ('storage_path', models.CharField(blank=True, help_text='Path in cloud storage (GCS bucket)', max_length=500, null=True)),
                ('fit_serial_number', models.CharField(blank=True, max_length=50, null=True)),
                ('fit_time_created', models.DateTimeField(blank=True, null=True)),
                ('fit_manufacturer', models.CharField(blank=True, max_length=100, null=True)),
                ('fit_product', models.CharField(blank=True, max_length=100, null=True)),
                ('fit_type', models.CharField(blank=True, help_text='FIT file type: activity, workout, course, etc.', max_length=50, null=True)),
                ('status', models.CharField(choices=[('pending', 'Pending'), ('processing', 'Processing'), ('completed', 'Completed'), ('failed', 'Failed'), ('duplicate', 'Duplicate')], default='pending', max_length=20)),
                ('error_message', models.TextField(blank=True, null=True)),
                ('uploaded_at', models.DateTimeField(auto_now_add=True)),
                ('processed_at', models.DateTimeField(blank=True, null=True)),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='fit_imports', to=settings.AUTH_USER_MODEL)),
                ('workout_log', models.ForeignKey(blank=True, help_text='Resulting workout log from import', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='fit_imports', to='activity.workoutlog')),
            ],
            options={
                'verbose_name': 'FIT File Import',
                'verbose_name_plural': 'FIT File Imports',
                'db_table': 'fit_file_import',
                'ordering': ['-uploaded_at'],
            },
        ),
        migrations.CreateModel(
            name='DeviceInfo',
            fields=[
                ('id', models.AutoField(primary_key=True, serialize=False)),
                ('device_index', models.CharField(default='creator', help_text='Device role: creator, 1, 2, etc.', max_length=50)),
                ('manufacturer', models.CharField(blank=True, max_length=100, null=True)),
                ('product_name', models.CharField(blank=True, max_length=255, null=True)),
                ('product_id', models.IntegerField(blank=True, null=True)),
                ('serial_number', models.CharField(blank=True, max_length=100, null=True)),
                ('device_type', models.CharField(blank=True, help_text='e.g., heart_rate_monitor, bike_power, running_dynamics', max_length=50, null=True)),
                ('software_version', models.CharField(blank=True, max_length=50, null=True)),
                ('hardware_version', models.CharField(blank=True, max_length=50, null=True)),
                ('battery_status', models.CharField(blank=True, max_length=50, null=True)),
                ('battery_level', models.IntegerField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('workout_log', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='devices', to='activity.workoutlog')),
            ],
            options={
                'verbose_name': 'Device Info',
                'verbose_name_plural': 'Device Info',
                'db_table': 'device_info',
            },
        ),
        migrations.AddField(
            model_name='activitylog',
            name='workout_log',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='activity_logs', to='activity.workoutlog'),
        ),
        migrations.CreateModel(
            name='ProgramSubscription',
            fields=[
                ('id', models.AutoField(primary_key=True, serialize=False)),
                ('status', models.CharField(choices=[('active', 'Active'), ('paused', 'Paused'), ('completed', 'Completed'), ('abandoned', 'Abandoned')], default='active', max_length=20)),
                ('current_week', models.PositiveIntegerField(default=1, help_text='Current week number')),
                ('started_at', models.DateTimeField(auto_now_add=True)),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
                ('paused_at', models.DateTimeField(blank=True, null=True)),
                ('start_date', models.DateField(blank=True, help_text='When the program officially starts', null=True)),
                ('preferred_days', models.JSONField(blank=True, default=list, help_text='List of preferred workout days')),
                ('notes', models.TextField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('program', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='subscriptions', to='core.program')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='program_subscriptions', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Program Subscription',
                'verbose_name_plural': 'Program Subscriptions',
                'db_table': 'program_subscription',
                'indexes': [models.Index(fields=['user', 'status'], name='program_sub_user_id_3ec3e5_idx'), models.Index(fields=['program'], name='program_sub_program_eb0b9d_idx')],
                'unique_together': {('user', 'program')},
            },
        ),
        migrations.AddIndex(
            model_name='setlog',
            index=models.Index(fields=['activity_log', 'set_number'], name='set_log_activit_f0cb36_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='setlog',
            unique_together={('activity_log', 'set_number')},
        ),
        migrations.AddIndex(
            model_name='workoutlog',
            index=models.Index(fields=['user', '-started_at'], name='workout_log_user_id_be7c58_idx'),
        ),
        migrations.AddIndex(
            model_name='workoutlog',
            index=models.Index(fields=['user', 'sport'], name='workout_log_user_id_9ac838_idx'),
        ),
        migrations.AddIndex(
            model_name='workoutlog',
            index=models.Index(fields=['session'], name='workout_log_session_6a6883_idx'),
        ),
        migrations.AddIndex(
            model_name='workoutlog',
            index=models.Index(fields=['source'], name='workout_log_source_19ef95_idx'),
        ),
        migrations.AddIndex(
            model_name='workoutlog',
            index=models.Index(fields=['external_id'], name='workout_log_externa_7a5869_idx'),
        ),
        migrations.AddIndex(
            model_name='recorddatapoint',
            index=models.Index(fields=['workout_log', 'elapsed_seconds'], name='record_data_workout_26b4b7_idx'),
        ),
        migrations.AddIndex(
            model_name='recorddatapoint',
            index=models.Index(fields=['workout_log', 'timestamp'], name='record_data_workout_837c68_idx'),
        ),
        migrations.AddIndex(
            model_name='personalrecord',
            index=models.Index(fields=['user', 'exercise', 'record_type'], name='personal_re_user_id_adcdd8_idx'),
        ),
        migrations.AddIndex(
            model_name='personalrecord',
            index=models.Index(fields=['user', 'is_current'], name='personal_re_user_id_564103_idx'),
        ),
        migrations.AddIndex(
            model_name='laplog',
            index=models.Index(fields=['workout_log', 'lap_number'], name='lap_log_workout_641e98_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='laplog',
            unique_together={('workout_log', 'lap_number')},
        ),
        migrations.AddIndex(
            model_name='fitfileimport',
            index=models.Index(fields=['user', '-uploaded_at'], name='fit_file_im_user_id_33bb39_idx'),
        ),
        migrations.AddIndex(
            model_name='fitfileimport',
            index=models.Index(fields=['file_hash'], name='fit_file_im_file_ha_6d435a_idx'),
        ),
        migrations.AddIndex(
            model_name='fitfileimport',
            index=models.Index(fields=['status'], name='fit_file_im_status_060495_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='deviceinfo',
            unique_together={('workout_log', 'device_index')},
        ),
        migrations.AddIndex(
            model_name='activitylog',
            index=models.Index(fields=['workout_log', 'order_in_workout'], name='activity_lo_workout_7aa4ba_idx'),
        ),
        migrations.AddIndex(
            model_name='activitylog',
            index=models.Index(fields=['exercise'], name='activity_lo_exercis_649052_idx'),
        ),
    ]
